<?xml version="1.0" encoding="UTF-8"?>
<job xmlns="urn:proactive:jobdescriptor:dev" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:proactive:jobdescriptor:dev ../../../src/org/ow2/proactive/scheduler/common/xml/schemas/jobdescriptor/dev/schedulerjob.xsd"
	name="job_native_workingDir" priority="normal" cancelJobOnError="false">
	<!-- description also test that description can contain more than 255 char -->
	<description>functional tests : a native job that tests multiple hosts reservation</description>
	<taskFlow>
		<task name="task1">
			<nativeExecutable>
				<dynamicCommand workingDir="${WDIR}">
					<generation>
						<script> <code language="javascript">
                        commandList = new java.util.ArrayList();
						if(org.objectweb.proactive.utils.OperatingSystem.getOperatingSystem() == org.objectweb.proactive.utils.OperatingSystem.windows){
							commandList.add("cmd.exe");
                            commandList.add("/c");
                            // the spaces at front and end allows java to add the necessary extra quotes
                            commandList.add(" \"${EXEC_PATH}\" \"${WDIR}\" ");
						}else if (java.lang.System.getProperty("proactive.test.runAsMe") != null) {
                            commandList.add("/bin/sh");
                            commandList.add("${EXEC_PATH}");
                            commandList.add("${WDIR}");
						}else {
                            commandList.add("${EXEC_PATH}");
                            commandList.add("${WDIR}");
						}
						</code>
						</script>
					</generation>
				</dynamicCommand>
			</nativeExecutable>
		</task>
	</taskFlow>
</job>