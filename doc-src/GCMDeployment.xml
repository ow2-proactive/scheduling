<!-- <!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN" "docbook.dtd"> -->

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="GCMDeployment">
	<info>
		<title>ProActive GCM Deployment</title>
	</info>


	<section xml:id="gcmd_introduction">
		<info>
			<title>Introduction</title>
		</info>

		<para>
			The GCM Deployment is split in two parts, one for grid administrators and the other for grid application developers. On the grid
			administration side, the administrator will write a Deployment Descriptor that will describe what resources the grid provides, and how
			these resources are acquired. On the application side, the developer will write an Application Descriptor that will describe how the
			application is launched, and what resources it needs. The link between the two sides is made through references from the Application
			Descriptor to one or several Deployment Descriptors.
		</para>
	</section>



	<section xml:id="gcmd_appli">
		<info>
			<title>ProActive Deployment API</title>
		</info>

		<section>
			<info>
				<title>Resources fixed by applications (SPMD)</title>
			</info>

			<para></para>
		</section>

		<section>
			<info>
				<title>Resources fixed by the deployer</title>
			</info>

			<para></para>
		</section>

		<section>
			<info>
				<title>On demand Scalability</title>
			</info>

			<para></para>
		</section>


	</section>

	<section>
		<info>
			<title>GCM Deployment Descriptors</title>
		</info>


		<section>
			<info>
				<title>Host Information</title>
			</info>

			<para>
				The HostInfo data structure describes a single machine and the environment it provides, with the following information:
				<itemizedlist>
					<listitem>
						<para>userName : (string) the name of the user under which this host can be accessed</para>
					</listitem>
					<listitem>
						<para>homeDirectory : (absolute path) the home directory of the user</para>
					</listitem>
					<listitem>
						<para>os : (one of "unix" or "windows") the operating system the host is running</para>
					</listitem>
					<listitem>
						<para>
							hostCapacity : (positive integer) the number of processes (VM or other executable) that this host can handle (default
							value is 1)
						</para>
					</listitem>
					<listitem>
						<para>vmCapacity : (positive integer) the number of nodes a single VM on this host can handle (default value is 1)</para>
					</listitem>
					<listitem>
						<para>id : (ID) an ID identifying the host</para>
					</listitem>
				</itemizedlist>

			</para>
		</section>

		<section>
			<info>
				<title>Bridges</title>
			</info>

			<para>
				A bridge is meant to represent a frontend to a computing resource. Many grid architectures have such a feature : each physical machine
				is not accessible directly, the user must instead go through a single machine called a front-end. In a deployment descriptor, a bridge
				is a gateway toward either :
				<itemizedlist>
					<listitem>
						<para>a host</para>
					</listitem>
					<listitem>
						<para>a set of groups</para>
					</listitem>
					<listitem>
						<para>another bridge</para>
					</listitem>
				</itemizedlist>

				A bridge is defined as a base structure meant to be derived. The base structure only defines an id (string).
			</para>

			<section>
				<info>
					<title>RSH</title>
				</info>

				<para>
					An RSH bridge element can have the following attributes :
					<itemizedlist>
						<listitem>
							<para>id (string) : the id of the bridge connector corresponding to this definition</para>
						</listitem>
						<listitem>
							<para>hostname (string) : the network hostname of the physical machine which acts as the bridge</para>
						</listitem>
						<listitem>
							<para>username (string, optional) : the user name under which the machine can be accessed</para>
						</listitem>
						<listitem>
							<para>commandPath (string, optional) : the path of rsh client to use</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>


			<section>
				<info>
					<title>SSH</title>
				</info>

				<para>
					An SSH bridge element can have the follow child element :
					<itemizedlist>
						<listitem>
							<para>privateKey (path string) : the file of the private SSH key needed to access the bridge</para>
						</listitem>
					</itemizedlist>

					An SSH bridge element can have the following attributes :
					<itemizedlist>
						<listitem>
							<para>id (string) : the id of the bridge connector corresponding to this definition</para>
						</listitem>
						<listitem>
							<para>hostname (string) : the network hostname of the physical machine which acts as the bridge</para>
						</listitem>
						<listitem>
							<para>username (string, optional) : the user name under which the machine can be accessed</para>
						</listitem>
						<listitem>
							<para>commandPath (string) : the path of the ssh client to use</para>
						</listitem>
						<listitem>
							<para>commandOptions (string) : options to pass to the ssh command</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>
		</section>

		<section>
			<info>
				<title>Groups</title>
			</info>

			<para>
				A Group is a data structure defining a set of machines with identical configuration (like a cluster). It is meant as a base structure
				which can be derived in an Object-Oriented manner to implement any kind of group. There currently are two kinds of groups :
				<orderedlist>
					<listitem>
						<para>"direct" groups</para>
					</listitem>
					<listitem>
						<para>job schedulers</para>
					</listitem>
				</orderedlist>
			</para>
			<para>It is therefore possible to define a standard-compliant deployment descriptor even on a grid which has its own job scheduler.</para>
			<para>All group protocols have the following child elements :</para>
			<itemizedlist>
				<listitem>
					<para>environment (environment) : the environment for the command and the following attributes</para>
				</listitem>
			</itemizedlist>
			<para>and the following attributes</para>
			<itemizedlist>
				<listitem>
					<para>id (ID) : the id of the group this element represents</para>
				</listitem>
				<listitem>
					<para>commandPath (path string) : path of the command which is used to submit a job to the group protocol</para>
				</listitem>
			</itemizedlist>

			<section>
				<info>
					<title>CCS</title>
				</info>

				<para>
					This group handles Microsoft’s Compute Cluster Server. The CCS group definition has the following child elements :
					<itemizedlist>
						<listitem>
							<para>
								resources : the resources that will be allowed to the job. This element can have two children :
								<itemizedlist>
									<listitem>
										<para>cpus (positive integer) : the number of CPUs allocated for the job</para>
									</listitem>
									<listitem>
										<para>runtime (time) : the maximum runtime allowed for the job</para>
									</listitem>
								</itemizedlist>
							</para>
						</listitem>
						<listitem>
							<para>stdout (path string) : path of the file where the standard output of the job will be stored</para>
						</listitem>
						<listitem>
							<para>stderr (path string) : path of the file where the standard error of the job will be stored</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

			<section>
				<info>
					<title>LSF</title>
				</info>

				<para>
					Group definition for the LSF scheduler. The LSF group definition has the following child elements :
					<itemizedlist>
						<listitem>
							<para>
								resource (string) : this element has the following attributes :
								<itemizedlist>
									<listitem>
										<para>(positive integer) : number of processors requested</para>
									</listitem>
									<listitem>
										<para>walltime (time) : maximum time allowed for the job</para>
									</listitem>
								</itemizedlist>
							</para>
						</listitem>
						<listitem>
							<para>processorsNumber (positive integer) : minimum number of processors requested to run the job</para>
						</listitem>
						<listitem>
							<para>
								resourceRequirement (string) : a resource requirement string as defined by the lsf documentation (‘lsfintro’ manpage)
							</para>
						</listitem>
					</itemizedlist>
				</para>
				<para>
					It also has the following attributes
					<itemizedlist>
						<listitem>
							<para>interactive (boolean) : whether the job is interactive or not</para>
						</listitem>
						<listitem>
							<para>jobName (string) : name of the job</para>
						</listitem>
						<listitem>
							<para>queue (string) : name of the queue the job will be submitted in</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

			<section>
				<info>
					<title>OAR</title>
				</info>

				<para>
					Group definition for the OAR job scheduler [15]. The OAR group definition has the following child elements :
					<itemizedlist>
						<listitem>
							<para>
								resource (string) : this element has the following attributes :
								<itemizedlist>
									<listitem>
										<para>nodes (positive integer) : number of nodes requested</para>
									</listitem>
									<listitem>
										<para>cpu (positive integer) : number of CPUs requested</para>
									</listitem>
									<listitem>
										<para>core (positive integer) : number of cores requested</para>
									</listitem>
									<listitem>
										<para>walltime (time) : maximum time allowed for the job</para>
									</listitem>
								</itemizedlist>

								It also can have a string content which is passed verbatim–o the ‘--resource’ option of the oarsub command.
							</para>
						</listitem>

						<listitem>
							<para>directory (path string) : the working directory of the job script</para>
						</listitem>
						<listitem>
							<para>stdout (path string) : path of the file where the standard output of the job will be stored</para>
						</listitem>
						<listitem>
							<para>stderr (path string) : path of the file where the standard error of the job will be stored</para>
						</listitem>
					</itemizedlist>
				</para>
				<para>
					It has the following attributes :
					<itemizedlist>
						<listitem>
							<para>
								interactive (boolean) : start an interactive job. If true, open a login shell on the first node instead of running a
								script (default is false).
							</para>
						</listitem>
						<listitem>
							<para>queue (string) : name of the queue to submit the job to.</para>
						</listitem>
						<listitem>
							<para>type (‘deploy’, ‘besteffort’, ‘cosystem’, ‘checkpoint’, ‘timesharing’) : job type – the default is ‘deploy’.</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

			<section>
				<info>
					<title>PBS</title>
				</info>

				<para>
					Group definition for the PBS/Torque job scheduler. The PBS/Torque group definition has the following child elements :
					<itemizedlist>

						<listitem>
							<para>
								resource (string) : this element has the following attributes :
								<itemizedlist>
									<listitem>
										<para>nodes (positive integer) : number of nodes requested</para>
									</listitem>
									<listitem>
										<para>ppn (positive integer) : number of CPUs requested</para>
									</listitem>
									<listitem>
										<para>walltime (time) : maximum time allowed for the job</para>
									</listitem>
								</itemizedlist>
							</para>
						</listitem>
						<listitem>
							<para>nodes (positive integer) : number of nodes requested</para>
						</listitem>
						<listitem>
							<para>processorsPerNode (positive integer) : number of processors per node requested</para>
						</listitem>
						<listitem>
							<para>
								mailWhen (combination of Abort, Begin, End separated by ‘|’) : when to send an email (Abort : if the job is aborted,
								Begin : when the job is started, End : when the job terminates)
							</para>
						</listitem>
						<listitem>
							<para>mailTo (comma-seperated list of email addresses) : where the job status emails should be sent</para>
						</listitem>
						<listitem>
							<para>joinOutput (boolean) : if true, join the output of stderr to stdout</para>
						</listitem>
						<listitem>
							<para>stdout (path string) : path of the file where the standard output of the job will be stored</para>
						</listitem>
						<listitem>
							<para>stderr (path string) : path of the file where the standard error of the job will be stored</para>
						</listitem>
					</itemizedlist>

					It has the following attributes :
					<itemizedlist>
						<listitem>
							<para>
								queue (string) : destination queue for the job. The argument can be of the following format :
								<itemizedlist>
									<listitem>
										<para>queue : a queue on the default server</para>
									</listitem>
									<listitem>
										<para>@server : the default queue on the server</para>
									</listitem>
									<listitem>
										<para>queue@server : the queue on the given server</para>
									</listitem>
								</itemizedlist>
							</para>
						</listitem>
						<listitem>
							<para>jobName (string 15 chars long, no whitespace, first char must be alphabetic) : the name of the job</para>
						</listitem>
						<listitem>
							<para>interactive (boolean) : whether the job is interactive or not</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

			<section>
				<info>
					<title>Prun</title>
				</info>

				<para>
					Group definition for the PRUN run server. The PRUN group definition has the following child elements :

					<itemizedlist>
						<listitem>
							<para>
								resource (string) : this element has the following attributes :
								<itemizedlist>
									<listitem>
										<para>nodes (positive integer) : number of nodes requested</para>
									</listitem>
									<listitem>
										<para>ppn (positive integer) : number of CPUs requested</para>
									</listitem>
									<listitem>
										<para>walltime (time) : maximum time allowed for the job</para>
									</listitem>
								</itemizedlist>
							</para>
						</listitem>

						<listitem>
							<para>stdout (path string) : name of the file in which the results will be printed</para>
						</listitem>
					</itemizedlist>

					It has no attribute.
				</para>
			</section>

			<section>
				<info>
					<title>RSH</title>
				</info>

				<para>
					The RSH Group has the following child elements :
					<itemizedlist>
						<listitem>
							<para>(host list) : the list of hosts to connect to</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

			<section>
				<info>
					<title>SSH</title>
				</info>

				<para>
					The SSH Group has the following child elements :
					<itemizedlist>
						<listitem>
							<para>(host list) : the list of hosts to connect to</para>
						</listitem>
						<listitem>
							<para>privateKey (path string) : the file of the private SSH key needed to access the host</para>
						</listitem>
						<listitem>
							<para>commandOptions (string) : the list of options which will be passed to the ssh command</para>
						</listitem>
					</itemizedlist>
				</para>
			</section>

		</section>

	</section>

	<section>
		<info>
			<title>GCM Application descriptor</title>
		</info>

		<section>
			<info>
				<title>Executable</title>
			</info>

			<para>
				This type of application describes the launch of a stand-alone executable on the grid. It can have the following child elements :
			</para>

			<itemizedlist>
				<listitem>
					<para>
						nodeProvider (empty element with a single ‘refId’ attribute) : the id of a node provider (defined in the &lt;resources&gt;
						part). There can be any number of such element.
					</para>
				</listitem>
				<listitem>
					<para>
						command : the command which will be run on the portion of the grid defined by the specified node providers. The contents of
						this element are described below.
					</para>
				</listitem>
			</itemizedlist>

			<para>This element can have the following attribute :</para>
			<itemizedlist>
				<listitem>
					<para>
						instances (one of “onePerHost”, “onePerVM”, “onePerCapacity”) : the number of instances of the command which will be run
					</para>
				</listitem>
			</itemizedlist>

			<para>The &lt;command&gt; element can have the following children (in this specified order) :</para>
			<itemizedlist>
				<listitem>
					<para>path (path string) : the path of the executable</para>
				</listitem>

				<listitem>
					<para>arg (string) : the arg string which will be passed to the command. There can be any number of such element.</para>
				</listitem>
				<listitem>
					<para>filetransfer (file transfer) : the files which which should be transferred prior to running the command.</para>
				</listitem>
			</itemizedlist>

			<para>It can have the following attribute :</para>
			<itemizedlist>
				<listitem>
					<para>
						name (string) : name of the executable. If a &lt;path&gt; child element is present, the value of this attribute will be
						appended to the value of the %lt;path&gt; child element.
					</para>
				</listitem>
			</itemizedlist>


		</section>


		<section>
			<info>
				<title>ProActive</title>
			</info>

			<para>This element describes a ProActive-based applicatin. It can have the following children :</para>

			<itemizedlist>
				<listitem>
					<para>configuration : various configuration parameters - this element is described below</para>
				</listitem>
				<listitem>
					<para>technicalServices (technical services) : the set of technical services global to this instance of ProActive</para>
				</listitem>
			</itemizedlist>

			<para>the configuration element can have the following child elements :</para>
			<itemizedlist>
				<listitem>
					<para>bootClasspath (simple classpath) : the boot classpath for the JVM</para>
				</listitem>

				<listitem>
					<para>java (path string) : the path to the Java executable</para>
				</listitem>
				<listitem>
					<para>jvmarg (string) : arguments passed to the JVM</para>
				</listitem>
				<listitem>
					<para>applicationClasspath (classpath) : classpath for the application</para>
				</listitem>
				<listitem>
					<para>
						proactiveClasspath (classpath) : classpath used to override the standard ProActive classpath computed from its installation
						location
					</para>
				</listitem>
				<listitem>
					<para>securityPolicy (relative path) : path to the Java security policy file</para>
				</listitem>
				<listitem>
					<para>
						proactiveSecurity : security policy for application and runtime. This element has two children :
						<itemizedlist>
							<listitem>
								<para>
									applicationPolicy (relative path) : path to Java security policy file that will be applied on the application's
									objects deployed at runtime, like nodes and active objects
								</para>
							</listitem>
							<listitem>
								<para>
									runtimePolicy (relative path) : path to Java security policy file that will be applied on the ProActive Runtime
								</para>
							</listitem>
						</itemizedlist>
					</para>
				</listitem>
				<listitem>
					<para>log4jProperties (relative path) : path to the Java log4j configuration file</para>
				</listitem>
				<listitem>
					<para>userProperties (relative path) : path to the Java properties file</para>
				</listitem>
				<listitem>
					<para>virtualNode (virtual node) : description of a virtual node. There can be any number of such element</para>
				</listitem>

			</itemizedlist>

			<para>The &lt;proactive&gt; element can have the following attributes :</para>
			<itemizedlist>
				<listitem>
					<para>relpath (path string) : the location of the ProActive installation</para>
				</listitem>
				<listitem>
					<para>
						base (one of ‘HOME’, ‘ROOT’) : base location of the ProActive installation : HOME is the user’s home directory, ROOT is the
						root directory of the system.
					</para>
				</listitem>
			</itemizedlist>


			<para>A &lt;virtualNode&gt; element can have the following children :</para>
			<itemizedlist>
				<listitem>
					<para>
						nodeProvider (reference to a node provider) : the node provider which will provide the ProActive nodes for this virtual node –
						see below for description.
					</para>
				</listitem>
				<listitem>
					<para>
						technicalServices (technical service) : a technical service specific to this virtual node. There can be any number of such
						children. Technical Services are described in section 5.2.3
					</para>
				</listitem>
			</itemizedlist>

			<para>A virtualNode element can also have the following attributes :</para>
			<itemizedlist>
				<listitem>
					<para>id (string) : a string identifying this virtual node</para>
				</listitem>
				<listitem>
					<para>
						capacity (positive integer or “max”) : the capacity requested by this virtual node (that is, the total number of nodes it will
						request from the node providers which are affected to it).
					</para>
				</listitem>
			</itemizedlist>

			<para>
				A &lt;nodeProvider&gt; within a &lt;virtualNode&gt; can only have &lt;technicalServices&gt; child elements. These describe technical
				services specific to this node provider. A &lt;nodeProvider&gt; can also have the following attributes :
			</para>
			<itemizedlist>
				<listitem>
					<para>refid (string) : the id of the node provider (as defined in the resources element)</para>
				</listitem>
				<listitem>
					<para>
						capacity (positive integer or “max”) : the capacity of this ProActive node provider (that is, the number of ProActive nodes
						which will be requested from it)
					</para>
				</listitem>
			</itemizedlist>

		</section>

	</section>

	<section>
		<info>
			<title>FAQ</title>
		</info>

		<para></para>
	</section>

	<section>
		<info>
			<title>Tutorial</title>
		</info>

		<para>
			This tutorial shows how to deploy a grid-enabled application through the GCM standard. It will present the points of view of both the grid
			administrator and the application developer.
		</para>



		<!-- 
			
			Deployment Descriptor Tutorial
			
		-->
		<section>
			<info>
				<title>For the Grid Administrator : creating a deployment descriptor</title>
			</info>

			<para>
				The task of a grid administrator is to make a model of his grid resources through a GCM Deployment Descriptor. Several examples are
				available in the ProActive distribution. The deployment descriptor should represent the resources of the grid.

				A deployment descriptor has the following XML structure:

				<blockquote>
					<para>
						<programlisting>
							<![CDATA[
<environment>
		<descriptorVariable …/>
…
</environment>

<resources>
		<bridge …/>
		<group>
			<host …/>
			<host …/>
			…
		</group>
	…
</resources>

<acquisition>
		<lookup …/>
		<p2p …/>
	…
</acquisition>

<infrastructure>
		<hosts>
			<host…/>
		</hosts>

		<groups>
			<groupType …/>
		</group>

		<bridges>
			<bridgeType …/>
		</bridges>
	…
</infrastructure>

]]>

						</programlisting>
					</para>
				</blockquote>

			</para>
			<para>
				The elements must be specified in this order. The &lt;environment&gt; and &lt;acquisition&gt; elements can be omitted, while the
				&lt;resources&gt; and &lt;infrastructure&gt; ones are mandatory. They are the ones which define the model :

				<orderedlist>
					<listitem>
						<para>
							Infrastructure: this is a flat list of each individual element of the grid: hosts, groups and bridges listed in no
							particular order.
						</para>
					</listitem>
					<listitem>
						<para>
							Resources: this is a tree describing the hierarchical relationships between these infrastructure elements. These
							relationships are defined by:
							<itemizedlist>
								<listitem>
									<para>a host being within which group;</para>
								</listitem>
								<listitem>
									<para>a group being behind a bridge;</para>
								</listitem>
								<listitem>
									<para>a host being directly available.</para>
								</listitem>
							</itemizedlist>
						</para>
					</listitem>
				</orderedlist>
			</para>
			<para>
				Let's examine a couple of basic examples. Considering a very simple grid, that is two desktop PCs networked together. Such a setup
				would be represented as follows (configuration parameters are omitted for the sake of clarity):
			</para>

			<blockquote>
				<para>
					<programlisting>
						<![CDATA[
<resources>
	<hosts>
		<host refid="host1"  />
		<host refid="host2"  />
	</hosts>
</resources>

<infrastructure>	
    <hosts>
		<host id="host1"  />
		<host id="host2"  />
	</hosts>
</infrastructure>
]]>
					</programlisting>
				</para>
			</blockquote>

			<para>
				There is no hierarchical relation between the two hosts, so both resources and infrastructure parts are identical (aside of the extra
				configuration parameters which are omitted here). A slightly more complex example would be a cluster of 12 mono-processor machines
				running LSF. The representation in GCM Deployment would be as follows:
			</para>

			<blockquote>
				<para>
					<programlisting>
						<![CDATA[
<resources>
		<group refid="LSF_GROUP">
			<host refid="LSF_GROUP_MEMBER" />
		</group>
</resources>

<infrastructure>
	<hosts>
		<host id="LSF_GROUP_MEMBER" />
	</hosts>

	<groups>
		<lsfGroup id="LSF_GROUP" >
			<resources processorNumber="12" />
		</lsfGroup>
	</groups>
</infrastructure>

]]>
					</programlisting>
				</para>
			</blockquote>

			<para>
				Within the &lt;infrastructure&gt;, the &lt;hosts&gt; part describes the configuration common to the machines in the group. The
				&lt;groups&gt; part describes the LSF group itself. Finally, the &lt;resources&gt; part describes how they fit together, in this case
				the host model being within the LSF group.
			</para>

			<para>The next paragraphs go more in depth on the content and usage of each element.</para>

			<section>
				<info>
					<title>Environment element</title>
				</info>
				<para>
					To allow for a bit of flexibility, it is possible to define variables in a descriptor. The variables can be used in any XML value
					element. They cannot be used in an XML element name. The &lt;environment&gt; element is where the variables are defined. It is a
					simple list of &lt;descriptorVariable&gt; elements. There is no limitation on the number of elements. The element has only two
					attributes, "name" and "value", each accepting string values. The element cannot have child elements. For example:

					<blockquote>
						<para>
							<programlisting>
								<![CDATA[
<environment>
	<descriptorVariable name="usertype" value="admin" />
  <descriptorVariable name="username" value="jsmith" />
</environment>
]]>

							</programlisting>
						</para>
					</blockquote>

					This allows the following usage later on in the decriptor: &lt;sshGroup user="${username}" /&gt;


				</para>
			</section>

			<section>
				<info>
					<title>Resources element</title>
				</info>
				<para>
					The &lt;resource&gt; element describes the hierarchical structure of the available grid resources. This can be seen as the
					topology of the grid: which hosts are part of a group, which group is behind a bridge, etc… All the grid resources which are
					listed in it are fully defined in the &lt;infrastructure&gt; element. However it doesn't have to hold every element listed in
					&lt;infrastructure&gt;, it is meant to contain only the subset of resources which are actually used by the deployment. This is to
					give further flexibility in the descriptor, in that the infrastructure part can be kept while the resource part is changed to suit
					the current deployment needs.
				</para>

				<para>

					There are 3 possible elements within the &lt;resource&gt; element:
					<orderedlist>
						<listitem>
							<para>
								&lt;host&gt; : this represents a single machine, or more precisely a single configuration. When used within a group,
								it represents the common configuration of all machines within this group.
							</para>
						</listitem>
						<listitem>
							<para>
								&lt;group&gt; : this represents a set of machines all sharing a common configuration. Typically a cluster. The
								configuration is represented through a Host element.
							</para>
						</listitem>
						<listitem>
							<para>
								&lt;bridge&gt; : this represents a machine which acts as a gateway to one or several other machines. Typically, a
								front-end for a cluster.
							</para>
						</listitem>
					</orderedlist>

					These elements all take a single argument named 'refid'. The value of the argument is the id of the corresponding
					host/bridge/group element defined in the &lt;infrastructure&gt; element. The topology must be described according to the following
					rules:
					<itemizedlist>
						<listitem>
							<para>A host can be at the top level, or in a group element</para>
						</listitem>
						<listitem>
							<para>A group can be at the top level, or in a bridge element</para>
						</listitem>
						<listitem>
							<para>A bridge can only be at the top level</para>
						</listitem>
					</itemizedlist>

					For example, the following constructions are correct: Single host:

					<blockquote>
						<para>
							<programlisting>
								<![CDATA[
<host refid="A_HOST" />
]]>
							</programlisting>
						</para>
					</blockquote>

					Group:

					<blockquote>
						<para>
							<programlisting>
								<![CDATA[
<group refid="CLUSTER">
	<host refid="CLUSTER_NODE" />
</group>
]]>
							</programlisting>
						</para>
					</blockquote>

					Group behind a bridge:

					<blockquote>
						<para>
							<programlisting>
								<![CDATA[
<bridge refid="CLUSTER_FRONT_END" />
	<group refid="CLUSTER">
		<host refid="CLUSTER_NODE" />
	</group>
</bridge>
]]>
							</programlisting>
						</para>
					</blockquote>

				</para>

			</section>

			<section>
				<info>
					<title>Acquisition element</title>
				</info>
				<para>
					The &lt;acquisition&gt; element describes how resources which are already running can be acquired. It can be used or extended
					towards standards for managing resources from desktop grids. It contains a simple sequence of two types of elements:
					&lt;lookup&gt; and &lt;p2p&gt; , in this order. Each element can either have a single occurrence or be omitted. The &lt;lookup&gt;
					element has the following three attributes:
					<orderedlist>
						<listitem>
							<para>type: one of "RMI", "HTTP", "IBIS";</para>
						</listitem>
						<listitem>
							<para>hostlist: a HostList as defined in 5.1.1;</para>
						</listitem>
						<listitem>
							<para>port: a positive integer.</para>
						</listitem>
					</orderedlist>

					It cannot have any child elements.
				</para>
				<para>
					The &lt;p2p&gt; element has a single attribute named "nodesAsked", which holds a positive integer value, or the value 'MAX',
					indicating the number of requested nodes. The value 'MAX' means that the maximum number of available nodes will be allocated to
					the task. If more nodes are made available during the course of the task's execution, they will be added as well. The &lt;p2p&gt;
					element can have two children. The first one is &lt;localClient&gt;, which defines the parameters for the local P2P client. These
					parameters are represented by two attributes:
					<orderedlist>
						<listitem>
							<para>protocol (enumeration), which can be one of 'RMI', 'HTTP', or 'IBIS'</para>
						</listitem>
						<listitem>
							<para>port (positive integer), which is the client's IP port number</para>
						</listitem>
					</orderedlist>

					The second child is &lt;peerSet&gt;, which is a simple sequence of &lt;peer&gt; elements. Each peer element is a string defining
					the url toward an access point to the p2p network.

				</para>
			</section>

			<section>
				<info>
					<title>Infrastructure element</title>
				</info>
				<para>
					The &lt;infrastructure&gt; tag holds the list of grid resources on which the deployment can take place, in no particular order.
					Its purpose is to describe how these resources are deployed (i.e. through which protocols). It can have a single child element of
					each of the following types: &lt;hosts&gt;, &lt;bridges&gt;, &lt;groups&gt;. &lt;bridges&gt; and &lt;groups&gt; may be empty or
					omitted, but there should be at least one child element in &lt;hosts&gt;.
				</para>

				<section>
					<info>
						<title>Host List</title>
					</info>

					<para>
						The format of a host list is a whitespace-seperated list of name patterns or hostnames. A name pattern describes a set of
						hostnames with a common root. The format is as follows.
						<blockquote>
							<para>
								<programlisting>
									<![CDATA[
<root name><interval> 
]]>
								</programlisting>
							</para>
						</blockquote>

						with root name being an alphanumeric string (only letters and digits, no spaces or punctuation signs), and interval defining a
						set of numerical values in the form of an interval or list of values, possibly followed by an exclusion interval or list of
						values. The general form of an interval is:
						<blockquote>
							<para>
								<programlisting>
									<![CDATA[

[<value set>]^[<value set>]
]]>
								</programlisting>
							</para>
						</blockquote>

						or simply
						<blockquote>
							<para>
								<programlisting>
									<![CDATA[

[<value set>] 
]]>
								</programlisting>
							</para>
						</blockquote>

						if no exclusion interval is needed.

					</para>

					<para>
						A value set is a coma-seperated list of integers or integers pairs separated by a dash, meaning an interval of values. The
						values of an interval must be specified in increasing order, and the generated values will be in increasing order. Also, the
						first integer of an interval can have leading zeroes to indicate the number of digits (numbers will be padded with zeroes if
						needed). Some examples:
						<itemizedlist>
							<listitem>
								<para>host[0-5]: host0, host1 … host5;</para>
							</listitem>
							<listitem>
								<para>host[0-5]^[4]: host0, host1, host2, host3, host5;</para>
							</listitem>
							<listitem>
								<para>host[0-10]^[4-6]: host0, host1, host2, host3, host7, host8, host9, host10;</para>
							</listitem>
							<listitem>
								<para>host[00-5]: host00, host01, host02… host05;</para>
							</listitem>
							<listitem>
								<para>host[1, 004-7, 09]: host1, host004, host005, host006, host007, host09.</para>
							</listitem>
						</itemizedlist>
					</para>

				</section><!-- host list def -->

			</section><!-- infrastructure element -->


		</section><!-- end of Deployment Descriptor Tutorial -->



		<!-- 
			
			Application Descriptor Tutorial
			
		-->
		<section>
			<info>
				<title>For the Grid Application Developer : creating an application descriptor</title>
			</info>

			<para></para>

		</section><!-- end of Application Descriptor Tutorial -->

	</section>


</chapter>
