<?xml version="1.0" encoding="UTF-8"?>
<ProActiveDescriptor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www-sop.inria.fr/oasis/proactive/schema/DescriptorSchema.xsd">
	<variables>
		<descriptorVariable name="PROACTIVE_HOME" value="/home/user/ProActive"/> <!--CHANGE ME!!!! -->
	</variables>
        <componentDefinition>
                <virtualNodesDefinition>
                        <virtualNode name="plugtest" property="multiple"/>
                </virtualNodesDefinition>
        </componentDefinition>
        <deployment>
                <mapping>
                        <map virtualNode="plugtest">
                                <jvmSet>
                                        <vmName value="Jvm1"/>
                                </jvmSet>
                        </map>
                </mapping>
                <jvms>
                        <jvm name="Jvm1">
                                <creation>
                                        <processReference refid="sshHierarchical"/>
                                </creation>
                        </jvm>
                </jvms>
        </deployment>
        <infrastructure>
                <processes>
                        <processDefinition id="internalJVM">
                                <jvmProcess class="org.objectweb.proactive.core.process.JVMNodeProcess">
                                        <classpath>
						<absolutePath value="${PROACTIVE_HOME}/lib/ProActive.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/asm.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/javassist.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/bouncycastle.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/componets/fractal.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/log4j.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/xercesImpl.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/nqueen.jar"/>
						<absolutePath value="${PROACTIVE_HOME}/lib/jsch.jar"/>
					</classpath>
                                        <javaPath>
                                                <absolutePath  value="/home/rquilici/j2sdk1.4.2_05/bin/java"/>
                                        </javaPath>
                                        <policyFile>
                                                <absolutePath  value="/home/rquilici/ProActive/scripts/proactive.java.policy"/>
                                        </policyFile>
                                        <log4jpropertiesFile>
                                                <absolutePath  value="/home/rquilici/ProActive/scripts/proactive-log4j"/>
                                        </log4jpropertiesFile>
                                </jvmProcess>
					</processDefinition>
					<processDefinition id="frontendJVM">
						<jvmProcess class="org.objectweb.proactive.core.process.JVMNodeProcess">
							<extendedJvm refid="internalJVM" overwriteParameters="yes"/>
							<jvmParameters>
								<parameter value="-Dproactive.communication.protocol=rmissh"/>
							</jvmParameters>
						</jvmProcess>
					</processDefinition>
					
					<processDefinition id="sgeprocess">
                	<gridEngineProcess class="org.objectweb.proactive.core.process.gridengine.GridEngineSubProcess">
						<processReference refid="internalJVM"/>
						<commandPath value="/opt/gridengine/bin/lx26-x86/qsub"/>
                		<gridEngineOption>
                        	<hostsNumber>10</hostsNumber> 
                            <bookingDuration>02:00:00</bookingDuration>
                            <scriptPath>
                            	<absolutePath value="/home/rquilici/ProActive/scripts/unix/cluster/gridEngineStartRuntime.sh"/>
                            </scriptPath>
                        </gridEngineOption>
                    </gridEngineProcess>
                </processDefinition>
                
				<processDefinition id="sshHierarchical">
					<hierarchicalProcess class="org.objectweb.proactive.core.process.ssh.SSHHierarchicalProcess" hostname="frontend_name" username="rquilici"> 
						<processReference refid="frontendJVM"/>
						<hierarchicalReference refid = "sgeprocess"/>
					</hierarchicalProcess>
				</processDefinition>
				
                </processes>
        </infrastructure>
</ProActiveDescriptor>
